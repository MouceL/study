今天读了一篇关于 es 如果实现快速检索的文章。

首先是对数据进行倒排索引，也就是包含 term1 的是哪些doc ，包含 term2 的是哪些 doc2。
在检索的term1 的时候会首先 找到 term1, 然后找到 相关文档编号.

按照mysql 的做法，会见这些 term- list 放在内存中，但是对于es 来说这太多了，因为es会默认为每个term 建立倒排索引。

es的做法是在 内存中放一颗 字典书, 来了一个 term 后先到字典书上去找前缀取磁盘地址，然后去磁盘顺序找 term。

在实际使用中，还有两个问题，如何存储 term 对应的 doc1 

es 在磁盘存这些 docid 的时候采用的是增加编码进行压缩。

es 为了提高查询速度，使用 filter 优化了查询，在内存中保留了一些信息没，即哪些文档与filter匹配。这里就要求了更高的压缩方式，es采用了一种bitmap方式。